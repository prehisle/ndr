[mypy]
python_version = 3.12
pretty = True
show_error_codes = True
ignore_missing_imports = True
plugins = sqlalchemy.ext.mypy.plugin

# 温和的基础告警，不提高失败风险
warn_unused_ignores = True
warn_redundant_casts = True
warn_unreachable = True
no_implicit_optional = False

# 初期仅校验应用代码，测试与性能脚本暂不纳入
exclude = (?x)(^tests/|^scripts/benchmark_ltree\.py$)

# 后续可以分模块逐步提高严格度（示例，暂不启用）
# [mypy-app.app.services.*]
# disallow_untyped_defs = True
# check_untyped_defs = True

[mypy-app.domain.*]
disallow_untyped_defs = True
check_untyped_defs = True

[mypy-app.app.services.*]
disallow_untyped_defs = True
check_untyped_defs = True

[mypy-app.infra.*]
disallow_untyped_defs = True
check_untyped_defs = True

[mypy-app.common.*]
disallow_untyped_defs = True
check_untyped_defs = True
